#!/bin/bash

# --- CONFIGURATION ---
SOURCE="$HOME/.config"
DEST="$HOME/.backup/.config"

# Liste des dossiers/fichiers √† sauvegarder (La Whitelist)
# Ajoute ou retire des noms ici selon tes besoins !
ELEMENTS=(
    "hypr"
    "waybar"
    "kitty"
    "micro"
    "gtk-3.0"
    "dconf"
    "btop"
    "menus"
    "volumeicon"
    "mimeapps.list"
    "dolphinrc"
    "verso_help.txt"
)

# --- D√âBUT DU SCRIPT ---

echo "üöÄ D√©marrage de l'extraction de la configuration..."

# 1. Cr√©er le dossier de destination s'il n'existe pas
if [ ! -d "$DEST" ]; then
    echo "üìÇ Cr√©ation du dossier de backup : $DEST"
    mkdir -p "$DEST"
fi

# 2. Boucle sur chaque √©l√©ment de la liste
for item in "${ELEMENTS[@]}"; do
    CHEMIN_SRC="$SOURCE/$item"
    CHEMIN_DEST="$DEST/$item"

    if [ -e "$CHEMIN_SRC" ]; then
        # On supprime l'ancienne version dans le backup pour √©viter les conflits
        rm -rf "$CHEMIN_DEST"
        
        # On copie la nouvelle version
        cp -r "$CHEMIN_SRC" "$DEST/"
        echo "‚úÖ Copi√© : $item"
    else
        echo "‚ö†Ô∏è Ignor√© : $item (Introuvable dans $SOURCE)"
    fi
done

echo "------------------------------------------------"
echo "üéâ Extraction termin√©e avec succ√®s vers $DEST !"
